# name: Deploy to production

# on:
#     push:
#         branches: ["main"]

# jobs:
#     deploy:
#         name: Build image
#         runs-on: ubuntu-latest

#         steps:
#             - name: Check out code
#               uses: actions/checkout@v2


#             - name: Load secrets and save to app.env
#               run: aws secretsmanager get-secret-value --secret-id simple_bank --query SecretString --output text | jq -r 'to_entries|map("\(.key)=\(.value)")|.[]' > app.env

#             - name: Build, tag, and push image to Amazon ECR
#               env:
#                   ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}
#                   ECR_REPOSITORY: alexbank
#                   IMAGE_TAG: ${{ github.sha }}
#               run: |
#                   docker build -t $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG -t $ECR_REGISTRY/$ECR_REPOSITORY:latest .
#                   docker push -a $ECR_REGISTRY/$ECR_REPOSITORY
